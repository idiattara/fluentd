Ce script Python est conçu pour mettre à jour un processor spécifique dans Apache NiFi. Il est principalement utilisé pour configurer un processor "PutElasticsearchHttpRecord" pour envoyer des données vers Elasticsearch. Le script lit un fichier XML représentant le flux NiFi, recherche le processor à mettre à jour, effectue les modifications nécessaires dans sa configuration, et redémarre le processor.


Configuration
Assurez-vous que les variables d'environnement suivantes sont configurées avant d'exécuter le script :

nifi_user : Nom d'utilisateur pour se connecter à NiFi.
nifi_password : Mot de passe de l'utilisateur NiFi.
NIFI_HOST : URL du serveur NiFi.
Assurez-vous également de disposer d'un fichier "pipeline.txt" qui contient la liste des noms de groupes de processus à traiter.


Fonctionnement
Le script lit le fichier "pipeline.txt" pour obtenir la liste des noms de groupes de processus à traiter.

Il recherche le processor "PutElasticsearchHttpRecord" dans le flux NiFi.

Pour chaque processor trouvé, le script effectue les étapes suivantes :

Vérifie si le processor est déjà mis à jour, enregistrant l'ID du processor dans "done.txt".
Vérifie si le group de processus du processor est dans la liste de groupes autorisés, sinon, le script passe au processor suivant.
Vérifie si le cluster NiFi est sain.
Met à jour la configuration du processor avec les paramètres Elasticsearch.
Redémarre le processor.
Le script enregistre les erreurs dans "error.txt" et les processors ignorés dans "not_treated.txt".

Le journal d'exécution est enregistré dans "execution.log".
